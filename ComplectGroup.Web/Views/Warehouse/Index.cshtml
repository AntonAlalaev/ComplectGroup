@model List<WarehouseItemDto>

@{
    ViewData["Title"] = "–°–∫–ª–∞–¥ –¥–µ—Ç–∞–ª–µ–π";
}

<div class="container mt-4">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="row mb-4">
        <div class="col-md-12">
            <h1>üì¶ –°–∫–ª–∞–¥ –¥–µ—Ç–∞–ª–µ–π</h1>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="d-flex flex-wrap gap-2 mb-3">
                <a asp-action="Receipt" class="btn btn-success">
                    <i class="bi bi-arrow-down"></i> –ü—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ
                </a>
                <a asp-action="ReceiptByComplectation" class="btn btn-success">
                    <i class="bi bi-box-seam"></i> –ü—Ä–∏—Ö–æ–¥ –ø–æ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
                </a>
                <a asp-action="Ship" class="btn btn-primary">
                    <i class="bi bi-arrow-up"></i> –û—Ç–≥—Ä—É–∑–∫–∞
                </a>
                <a asp-action="ShipByComplectation" class="btn btn-primary">
                    <i class="bi bi-box-seam"></i> –û—Ç–≥—Ä—É–∑–∫–∞ –ø–æ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏
                </a>
            </div>
            
            <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
            <div class="border-top pt-2 mb-3"></div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ -->
            <div class="d-flex flex-wrap gap-2">
                <a asp-action="ReceiptHistory" class="btn btn-outline-info">
                    <i class="bi bi-clock-history"></i>üì¶‚û°Ô∏è–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏—ë–º–æ–∫
                </a>
                <a asp-action="ShippingHistory" class="btn btn-outline-info">
                    <i class="bi bi-clock-history"></i> –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–≥—Ä—É–∑–æ–∫üöõ
                </a>
            </div>
        </div>
    </div>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["Success"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (Model?.Where(x => x.TotalQuantity > 0)?.Any() == true)
    {
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>–†–∞–∑–¥–µ–ª</th>
                    <th>–î–µ—Ç–∞–ª—å</th>
                    <th class="text-center">–î–æ—Å—Ç—É–ø–Ω–æ</th>
                    <th class="text-center">–ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ</th>
                    <th class="text-center">–í—Å–µ–≥–æ</th>
                    <th>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Where(x => x.TotalQuantity > 0))
                {
                    <tr>
                        <td>@item.Part.Chapter.Name</td>
                        <td>@item.Part.Name</td>
                        <td class="text-center"><span class="badge bg-success">@item.AvailableQuantity</span></td>
                        <td class="text-center"><span class="badge bg-warning">@item.ReservedQuantity</span></td>
                        <td class="text-center"><strong>@item.TotalQuantity</strong></td>
                        <td>@item.LastModifiedDate.ToString("dd.MM.yyyy HH:mm")</td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="mt-3">
            <p class="text-muted">–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ: <strong>@Model.Count(x => x.TotalQuantity > 0)</strong></p>
        </div>
    }
    else
    {
        <div class="alert alert-info">
            –ù–∞ —Å–∫–ª–∞–¥–µ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤. <a asp-action="Receipt">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
        </div>
    }

    <!-- –£–î–ê–õ–ï–ù –ù–ò–ñ–ù–ò–ô –ë–õ–û–ö –° –ö–ù–û–ü–ö–ê–ú–ò, –¢–ê–ö –ö–ê–ö –û–ù–ò –¢–ï–ü–ï–†–¨ –í –í–ï–†–•–£ -->
</div>

<style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∫–Ω–æ–ø–æ–∫ */
    .btn {
        min-width: 120px;
    }
    
    .btn-outline-info {
        border-width: 2px;
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @@media (max-width: 768px) {
        .d-flex {
            justify-content: center !important;
        }
        
        .btn {
            flex: 1 0 auto;
            min-width: 0;
            margin-bottom: 5px;
        }
    }
</style>